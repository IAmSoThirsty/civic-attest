{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/IAmSoThirsty/civic-attest/blob/main/contracts/identity.schema.json",
  "title": "Identity",
  "description": "Cryptographic identity in the civic attestation system",
  "type": "object",
  "required": [
    "office_id",
    "jurisdiction",
    "public_key",
    "key_version",
    "valid_from",
    "valid_to",
    "key_algorithm",
    "status",
    "identity_id"
  ],
  "properties": {
    "office_id": {
      "type": "string",
      "description": "Unique identifier for the office/role"
    },
    "jurisdiction": {
      "type": "string",
      "description": "Geographic or organizational jurisdiction"
    },
    "public_key": {
      "type": "string",
      "description": "Hex-encoded public key",
      "pattern": "^[0-9a-fA-F]+$"
    },
    "key_version": {
      "type": "integer",
      "description": "Version of this key",
      "minimum": 1
    },
    "valid_from": {
      "type": "string",
      "format": "date-time",
      "description": "Start of validity period (ISO 8601)"
    },
    "valid_to": {
      "type": "string",
      "format": "date-time",
      "description": "End of validity period (ISO 8601)"
    },
    "key_algorithm": {
      "type": "string",
      "description": "Signature algorithm",
      "enum": ["Ed25519", "Ed448"]
    },
    "status": {
      "type": "string",
      "description": "Current status of the identity",
      "enum": ["active", "revoked", "expired", "pending"]
    },
    "revocation_pointer": {
      "type": "string",
      "description": "Pointer to revocation record if revoked"
    },
    "identity_id": {
      "type": "string",
      "description": "Unique identifier for this identity version"
    }
  }
}
